t.test(dat$smoking==0,dat$smoking==1)
non_smoker <- dat$disease[dat$smoking==0]
non_smoker
non_smoker <- dat$disease[dat$smoking==0]
smoker <- dat$disease[dat$smoking==1]
t.test(non_smoker,smoker)
non_smoker <- dat$disease[dat$smoking==0]
smoker <- dat$disease[dat$smoking==1]
t.test(non_smoker,smoker,var.equal = TRUE)
t.test(dat$smoking==0,dat$smoking==1)
non_smoker <- dat$disease[dat$smoking==0]
smoker <- dat$disease[dat$smoking==1]
t.test(non_smoker,smoker,var.equal = TRUE)
non_smoker <- dat$disease[dat$smoking==0]
smoker <- dat$disease[dat$smoking==1]
t.test(non_smoker,smoker,var.equal = F)
non_smoker <- dat$disease[dat$smoking==0]
smoker <- dat$disease[dat$smoking==1]
t.test(non_smoker,smoker,var.equal = F)
non_smoker <- dat$disease[dat$smoking==0]
smoker <- dat$disease[dat$smoking==1]
t.test(non_smoker,smoker,var.equal = TRUE)
fit3 <- lm(disease ~ education + crowding + airqual + nutrition + factor(smoking),
data=dat)
fit3 <- lm(disease ~ education + crowding + airqual + nutrition + factor(smoking),
data=dat)
summary(fit3)
plot(fit3)
par(mfrow = c(2,2))
plot(fit3)
par(mfrow = c(2,2))
plot(fit1)
library(car)
vif(fit3)
str(dat)
fit3 <- lm(disease ~ education + crowding + airqual + nutrition + factor(smoking),
data=dat)
summary(fit3)
fit2 <- lm(disease~factor(smoking), data=dat)
summary(fit2)
fit3 <- lm(disease ~ education + crowding + airqual + nutrition + factor(smoking),
data=dat)
summary(fit3)
fit4 <- lm(disease ~ education + crowding + airqual + nutrition + factor(smoking)
+ airqual * factor(smoking), data=dat)
summary(fit4)
vif(fit4)
anova(fit3,fit4)
fit_nosmoking <- lm(disease ~ education + crowding + airqual + nutrition +
+ airqual * factor(smoking), data=dat)
anova(fit_nosmoking,fit4)
fit_nosmoking <- lm(disease ~ education + crowding + airqual + nutrition
+ airqual * factor(smoking), data=dat)
anova(fit_nosmoking,fit4)
fit_nosmoking <- lm(disease ~ education + crowding + airqual + nutrition
+ airqual*factor(smoking), data=dat)
anova(fit_nosmoking,fit4)
fit_nosmoking <- lm(disease ~ education + crowding + airqual + nutrition + airqual*factor(smoking), data=dat)
anova(fit_nosmoking,fit4)
fit_nosmoking <- lm(disease ~ education + crowding + airqual + nutrition + airqual*factor(smoking), data=dat)
anova(fit_nosmoking,fit4)
fit_nosmoking <- lm(disease ~ education + crowding + airqual + nutrition + airqual*factor(smoking), data=dat)
anova(fit_nosmoking,fit4)
summary(fit_nonsmoking)
summary(fit_nosmoking)
fit5 <- lm(disease ~ education + crowding + airqual + nutrition + airqual*factor(smoking), data=dat)
summary(fit5)
fit5 <- lm(disease ~ education + crowding + airqual + nutrition + airqual*factor(smoking) - factor(smoking), data=dat)
summary(fit5)
anova(fit5,fit4)
dat$airqualC <- scale(dat$airqual, center=TRUE, scale=FALSE)
fit6 <- lm(disease ~ education + crowding + airqualC + nutrition + factor(smoking)
+ airqualC * factor(smoking), data=dat)
vif(fit6)
summary(fit6)
anova(fit5,fit6)
fit_nosmoking_airqualC <- lm(education + crowding + airqualC + nutrition + airqualC *
factor(smoking) - factor(smoking))
fit_nosmoking_airqualC <- lm(education + crowding + airqualC + nutrition + airqualC *
factor(smoking) - factor(smoking),data=dat)
fit_nosmoking_airqualC <- lm(disease ~ education + crowding + airqualC + nutrition + airqualC *
factor(smoking) - factor(smoking),data=dat)
anova(fit_nosmoking_airqualC,fit6)
dat <- read.csv("lung.csv")
summary(dat)
fit7<- lm(disease ~ education + crowding + 31 + nutrition + factor(smoking)
+ 31 * factor(smoking), data=dat)
fit7<- lm(disease ~ education + crowding + I(airqual==31) + nutrition + factor(smoking)
+ I(airqual==31) * factor(smoking), data=dat)
summary(fit7)
fit7<- lm(disease ~ education + crowding + I(airqual=31) + nutrition + factor(smoking)
+ I(airqual=31) * factor(smoking), data=dat)
fit7<- lm(disease ~ education + crowding + I(airqual==31) + nutrition + factor(smoking)
+ I(airqual==31) * factor(smoking), data=dat)
summary(fit7)
library(emmeans)
install.
install.packages("emmeans")
library(emmeans)
fib.lm = lm(strength ~ machine * diameter, data = fiber)
fib.rg = ref_grid(fib.lm, at = list(diameter = c(21, 23, 25, 27)))
emmip(fib.rg, machine ~ diameter, CI=TRUE)
lung.lm = lm(disease ~ airqual, data = dat)
lung.rg = ref_grid(fib.lm, at = list(diameter = c(0, 31, 40.9, 78)))
emmip(lung.rg, disease ~ airqual, CI=TRUE)
lung.lm = lm(disease ~ airqual * diameter, data = dat)
lung.lm = lm(disease ~ smoking * airqual data = dat)
lung.lm = lm(disease ~ smoking * airqual, data = dat)
lung.rg = ref_grid(lung.lm, at = list(airqual = c(0, 31, 40.9, 78)))
emmip(lung.rg, disease ~ airqual, CI=TRUE)
lung.lm = lm(disease ~ smoking * airqual, data = dat)
lung.rg = ref_grid(lung.lm, at = list(airqual = c(0, 31, 40.9, 78)))
emmip(lung.rg, disease ~ airqual, CI=TRUE)
lung.lm
lung.rg
lung.lm = lm(disease ~ smoking * airqual, data = dat)
lung.rg = ref_grid(lung.lm, at = list(airqual = c(0, 31, 40.9, 78)))
emmip(lung.rg, smoking ~ airqual, CI=TRUE)
library(emmeans)
fib.lm = lm(strength ~ machine * diameter, data = fiber)
fib.rg = ref_grid(fib.lm, at = list(diameter = c(21, 23, 25, 27)))
emmip(fib.rg, machine ~ diameter, CI=TRUE)
plot(Y)
plot(Y,dnorm(Y))
Y
plot(Y,dnorm(Y))
plot(,dnorm(Y))
plot(Y,dnorm(Y))
plot(X,dnorm(Y))
fit1 <- lm(Y~fX)
summary(fit1)
par(mfrow = c(2,2))
plot(fit1)
mean(dat$disease[dat$smoking==0])
mean(dat$disease[dat$smoking==1])
library(emmeans)
fib.lm <- lm(strength ~ machine * diameter, data = fiber)
fib.rg <- ref_grid(fib.lm, at = list(diameter = c(21, 23, 25, 27)))
emmip(fib.rg, machine ~ diameter, CI=TRUE)
par(mfrow = c(2,2))
plot(fit)
fit <- lm(Y~X)
summary(fit)
fit1 <- lm(Y~fX)
summary(fit1)
library(survival)
plot(prob~age)
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c("0-10", "10-20","20-30","30-40","40-50","50-60","60-70","70-80","80-90")
plot(prob~age)
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c("0-10", "10-20","20-30","30-40","40-50","50-60","60-70","70-80","80-90")
plot(age,prob)
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(1,2,3,4,5,6,7,8,9)
xlab_age <- c("0-10", "10-20","20-30","30-40","40-50","50-60","60-70","70-80","80-90")
plot(age,prob)
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
xlab_age <- c("0-10", "10-20","20-30","30-40","40-50","50-60","60-70","70-80","80-90")
plot(age,prob,xlab=)
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
plot(age,prob,ylab="probability of survival")
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
ggplot(age,prob)+ylab("probability of survival")
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
library(ggplot2)
ggplot(age,prob)+ylab("probability of survival")
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
library(ggplot2)
ggplot(aes=(age,prob)+ylab("probability of survival")
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
library(ggplot2)
ggplot(aes(age,prob)+ylab("probability of survival")
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
library(ggplot2)
ggplot()+geom_point(aes(age,prob))+ylab("probability of survival")
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
library(ggplot2)
ggplot()+geom_point(aes(age,prob)) + geom_line() + ylab("probability of survival")
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
library(ggplot2)
ggplot() + geom_point(aes(age,prob),shape=1) + geom_line() + ylab("probability of survival")
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
library(ggplot2)
ggplot() + geom_point(aes(age,prob),size = v1,shape=1) + geom_line() + ylab("probability of survival")
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
library(ggplot2)
ggplot() + geom_point(aes(age,prob),shape=1) + geom_line() + ylab("probability of survival")
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
library(ggplot2)
survplot <- ggplot() + geom_point(aes(age,prob),shape=1) +
geom_line() + ylab("probability of survival")
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
library(ggplot2)
ggplot() + geom_point(aes(age,prob),shape=1) +  ylab("probability of survival")
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
library(ggplot2)
ggplot() + geom_point(aes(age,prob),shape=1) + geom_line() + ylab("probability of survival")
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
library(ggplot2)
ggplot() + geom_point(aes(age,prob),shape=1) + geom_line(linetype = "dashed") + ylab("probability of survival")
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
library(ggplot2)
ggplot() + geom_point(aes(age,prob),shape=1) + ylab("probability of survival") + theme_bw()
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
library(ggplot2)
ggplot() + geom_point(aes(age,prob),shape=1) + ylab("probability of survival") + theme_bw()
+ theme(panel.grid.major = element_blank())
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
library(ggplot2)
ggplot() + geom_point(aes(age,prob),shape=1) + ylab("probability of survival") + theme_bw() +
theme(panel.grid.major = element_blank())
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
library(ggplot2)
ggplot() + geom_point(aes(age,prob),shape=1) + ylab("probability of survival") + theme_bw() +
theme(panel.grid.major = element_blank() panel.grid.minor = element_blank(),
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
library(ggplot2)
ggplot() + geom_point(aes(age,prob),shape=1) + ylab("probability of survival") + theme_bw() +
theme(panel.grid.major = element_blank(),panel.grid.minor = element_blank(),
panel.border = element_blank(),
panel.background = element_blank())
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
library(ggplot2)
ggplot() + geom_point(aes(age,prob),shape=1) + ylab("probability of survival") + theme_bw() +
theme(axis.line = element_line(colour = "black"),
panel.grid.major = element_blank(),panel.grid.minor = element_blank(),
panel.border = element_blank(),
panel.background = element_blank())
prob <- c(1, 0.54, 0.34, 0.21, 0.14, 0.08, 0.05, 0.02, 0.01)
age <- c(0,10,20,30,40,50,60,70,80)
library(ggplot2)
ggplot() + geom_point(aes(age,prob),shape=1) + ylab("probability of survival") + theme_bw() +
theme(axis.line = element_line(colour = "black"),
panel.grid.major = element_blank(),panel.grid.minor = element_blank(),
panel.border = element_blank(),
panel.background = element_blank()) + geom_line()
plot(age,prob,ylab=("probability of survival"))
plot(age,prob,ylab=("probability of survival")mtype="b")
plot(age,prob,ylab=("probability of survival"),type="b")
plot(age,prob,ylab=("probability of survival"),type="b")
abline(prob=0.5)
plot(age,prob,ylab=("probability of survival"),type="b")
abline(y=0.5)
plot(age,prob,ylab=("probability of survival"),type="b")
abline(h=0.5)
plot(age,prob,ylab=("probability of survival"),type="b")
abline(h=0.5,col="red")
plot(age,prob,ylab=("probability of survival"),type="b")
abline(h=0.5,col="red")
abline(v=13)
plot(age,prob,ylab=("probability of survival"),type="b")
abline(h=0.5,col="red")
abline(v=12)
plot(age,prob,ylab=("probability of survival"),type="b")
abline(h=0.5,col="red")
abline(v=12,col="red")
uninstall_package
library(tinytex)
detach("package:tinytex", unload = TRUE)
library(tinytex)
detach("package:tinytex", unload = TRUE)
remove.packages("tinytex")
install.packages("tinytex")
remotes::install_github('yihui/tinytex')
tinytex:::install_prebuilt()
hiv_cases = read.csv('AtlasPlusTableData_HIV_2016.csv')
socdet = read.csv('AtlasPlusTableData_SocialDeterminants_2016.csv')
library(tidyr)
socdet_wide = socdet%>%pivot_wider(names_from = Indicator, values_from=Percent)
dat = merge(hiv_cases,socdet_wide)
dat$Pop100k = dat$Cases/dat$Rate.per.100000
rm(ls=list())
rm(list=ls())
hiv_cases = read.csv('AtlasPlusTableData_HIV_2016.csv')
socdet = read.csv('AtlasPlusTableData_SocialDeterminants_2016.csv')
library(tidyr)
socdet_wide = socdet%>%pivot_wider(names_from = Indicator, values_from=Percent)
dat = merge(hiv_cases,socdet_wide)
dat$Pop100k = dat$Cases/dat$Rate.per.100000
socdet_wide
dat
hiv_lm <- lm(Cases~1)
hiv_lm <- lm(Cases~1, data=dat)
summary(hiv_lm)
hiv_glm <- glm(Cases~1, data=dat, family="poisson")
summary(hiv_glm)
hiv_quasi_glm <- glm(Cases~1, data=dat, family="quasipoisson")
summary(hiv_quasi_glm)
rate_lm <- lm(log(Rate.per.100000)~1, data=dat)
rate_lm <- lm(log(Rate.per.100000)~1, data=dat)
summary(rate_lm)
dat
dat$logPop100k <- log(dat$Pop100k)
fit1 <- glmer(Cases~offset(logPop100k), data=dat, family=poisson)
library(lme4)
dat$logPop100k <- log(dat$Pop100k)
fit1 <- glmer(Cases~offset(logPop100k), data=dat, family=poisson)
library(lme4)
dat$logPop100k <- log(dat$Pop100k)
fit1 <- glmer(Cases~offset(logPop100k)+1, data=dat, family=poisson)
library(lme4)
dat$logPop100k <- log(dat$Pop100k)
fit1 <- glmer(Cases~offset(logPop100k)+1, data=dat, family=poisson)
library(lme4)
dat$logPop100k <- log(dat$Pop100k)
fit1 <- glmer(Cases~offset(logPop100k), data=dat, family=poisson)
library(lme4)
dat$logPop100k <- log(dat$Pop100k)
fit1 <- glmer(Cases~offset(logPop100k), data=dat, family="poisson")
library(lme4)
dat$logPop100k <- log(dat$Pop100k)
fit1 <- glmer(Cases~offset(logPop100k), data=dat, family="Poisson")
library(lme4)
dat$logPop100k <- log(dat$Pop100k)
fit1 <- glmer(Cases~1+offset(logPop100k), data=dat, family=poisson)
library(lme4)
dat$logPop100k <- log(dat$Pop100k)
fit1 <- glmer(Cases~1, data=dat, family=poisson)
library(lme4)
dat$logPop100k <- log(dat$Pop100k)
fit1 <- glmer(Cases~1 + offset(logPop100k), data=dat, family=poisson)
library(lme4)
dat$logPop100k <- log(dat$Pop100k)
fit1 <- glmer(Cases~1 + offset(logPop100k), data=dat, family='poisson')
library(lme4)
dat$logPop100k <- log(dat$Pop100k)
fit1 <- glmer(Cases ~ 1 + offset(logPop100k), data=dat, family='poisson')
library(lme4)
dat$logPop100k <- log(dat$Pop100k)
fit1 <- glmer(Cases ~ 1 + offset(logPop100k), data=dat, family='poisson')
library(lme4)
dat$logPop100k <- log(dat$Pop100k)
fit1 <- glm(Cases ~ 1 + offset(logPop100k), data=dat, family='poisson')
summary(fit1)
sr
dat
library(lme4)
dat$logPop100k <- log(dat$Pop100k)
fit1 <- glm(Cases ~ 1 + offset(logPop100k), data=dat, family="Poisson")
library(lme4)
dat$logPop100k <- log(dat$Pop100k)
fit1 <- glm(Cases ~ 1 + offset(logPop100k), data=dat, family="poisson")
summary(fit1)
dat$pov_C <- scale(dat$`Households living below the federal poverty level`, center=TRUE, scale=FALSE)
dat$nodip_C <- scale(dat$`Population 25 years and older w/o HS diploma`, center = TRUE, scale = FALSE)
dat$uninsured_C <- scale(dat$Uninsured, center = TRUE, scale = FALSEL)
dat$pov_C <- scale(dat$`Households living below the federal poverty level`, center=TRUE, scale=FALSE)
dat$nodip_C <- scale(dat$`Population 25 years and older w/o HS diploma`, center = TRUE, scale = FALSE)
dat$uninsured_C <- scale(dat$Uninsured, center = TRUE, scale = FALSE)
dat$vacant_housing_C <- scale(dat$`Vacant housing`, center = TRUE, scale = FALSE)
fit2 <- glm(Cases~pov_C + nodip_C + uninsured_C + vacant_housing_C, data = dat, family="poisson")
summary(fit2)
with(fit2, cbind(res.deviance= deviance, df=df.residual, p=pchisq(deviance, df.residual, lower.tail = FALSE)))
fit3 <- glm(Cases~pov_C + nodip_C + uninsured_C + vacant_housing_C, data = dat, family="quasipoisson")
summary(fit3)
fit4 <- glm(Cases~ offset(logPop100k) + pov_C + nodip_C + uninsured_C + vacant_housing_C, data = dat, family="quasipoisson")
summary(fit4)
fit4 <- glm(Cases~ offset(logPop100k) + pov_C + nodip_C + uninsured_C + vacant_housing_C, data = dat, family="quasipoisson")
plot(fit4)
summary(fit4)
e^2.55
exp(2.55)
exp(2.55)
exp(2.55-1.96*0.071)
exp(2.55+1.96*0.071)
exp(2.55 + 5*0.034)
exp(2.55 + 6*0.034)
exp(2.55 + 6*0.034) - exp(2.55 + 5*0.034)
exp(2.55 + 16*0.034) - exp(2.55 + 15*0.034)
exp(0.034)
fit5 <- lm(Rate.per.100000 ~ pov_C + nodip_C + uninsured_C + vacant_housing_C, data = dat)
fit5 <- lm(Rate.per.100000 ~ pov_C + nodip_C + uninsured_C + vacant_housing_C, data = dat)
plot(fit5)
fit6 <- glm(Rate.per.100000~ pov_C + nodip_C + uninsured_C + vacant_housing_C, data = dat, family="poisson")
plot(fit6)
fit6 <- glm(Rate.per.100000~ pov_C + nodip_C + uninsured_C + vacant_housing_C, data = dat, family="poisson")
plot(fit6)
summary(fit6)
fit5 <- lm(Rate.per.100000 ~ pov_C + nodip_C + uninsured_C + vacant_housing_C, data = dat)
sunmmary(fit5)
fit5 <- lm(Rate.per.100000 ~ pov_C + nodip_C + uninsured_C + vacant_housing_C, data = dat)
summary(fit5)
plot(fit5)
malawi = read.csv('Malawi_Fecal_Sludge_Data_to_post.csv')
malawi = read.csv('Malawi_Fecal_Sludge_Data_to_post.csv')
malawi = read.csv('Malawi_Fecal_Sludge_Data_to_post.csv')
malawi
fit6 <- glm(Rate.per.100000~ pov_C + nodip_C + uninsured_C + vacant_housing_C, data = dat, family="quasipoisson")
plot(fit6)
fit6 <- glm(Rate.per.100000~ pov_C + nodip_C + uninsured_C + vacant_housing_C, data = dat, family="poisson")
plot(fit6)
fit7 <- glmer(Depth_pathogen_presence~(1|Latrine_ID) + (1|Pathogen_Target) + (1|Latrine_ID:Pathogen_Target) + Depth + HH_population + shared_latrine + pit_type + water_source + toilet_paper, data = malawi, family=binomial(link='logit'))
summary(fit7)
lapply(allfits,function(x) x@optinfo$conv$lme4$messages)
install.packages("optimx")
install.packages("dfoptim")
lapply(allfits,function(x) x@optinfo$conv$lme4$messages)
library(optimx)
library(dfoptim)
lapply(allfits,function(x) x@optinfo$conv$lme4$messages)
library(optimx)
library(dfoptim)
lapply(allfits,function(x) x@optinfo$conv$lme4$messages)
library(optimx)
library(dfoptim)
allfits <- allFit(fit7)
lapply(allfits,function(x) x@optinfo$conv$lme4$messages)
model.boby=allfits[['bobyqa']]
model.boby <- allfits[['bobyqa']]
model.boby
fit8 <- glmer(Depth_pathogen_presence~(1|Latrine_ID) + (1|Pathogen_Target) + (1|Latrine_ID:Pathogen_Target) + Depth + HH_population + shared_latrine + pit_type + water_source + toilet_paper, data = malawi, family=binomial(link='logit'), control=glmerControl(optimizer="bobyqa"))
summary(fit8)
model.boby <- allfits[['bobyqa']]
model.boby
fit8 <- glmer(Depth_pathogen_presence~(1|Latrine_ID) + (1|Pathogen_Target) + (1|Latrine_ID:Pathogen_Target) + Depth + HH_population + shared_latrine + pit_type + water_source + toilet_paper, data = malawi, family=binomial(link='logit'), control=glmerControl(optimizer="bobyqa"))
summary(fit8)
fit9 <- glmer(Depth_pathogen_presence~(1|Latrine_ID) + (1|Pathogen_Target) + Depth + HH_population + shared_latrine + pit_type + water_source + toilet_paper, data = malawi, family=binomial(link='logit'))
summary(fit9)
fit9 <- glmer(Depth_pathogen_presence~(1|Latrine_ID) + (1|Pathogen_Target) + Depth + HH_population + shared_latrine + pit_type + water_source + toilet_paper, data = malawi, family=binomial(link='logit'),control=glmerControl(optimizer="bobyqa"))
summary(fit9)
exp(-1.25232)
exp(-1.25232-1.96*0.40279)
exp(-1.25232+1.96*0.40279)
range(malawi$shared_latrine)
exp(-1.25232)
exp(-1.25232-1.96*0.40279)
exp(-1.25232+1.96*0.40279)
-1.25232-1.96*0.40279
1.25232+1.96*0.40279
-1.25232-1.96*0.40279
-1.25232+1.96*0.40279
range(malawi$HH_population)
exp(-2.82809  + 7 * 0.17997)
exp(-2.82809  + 7 * 0.17997) /(1+exp(-2.82809  + 7 * 0.17997) )
range(malawi$pit_type)
devtoll
devtools::load_all()
setwd("~/Desktop/Covariate project/CAR/CAR")
devtools::load_all()
devtools::build()
devtools::install_github()
fit8 <- glmer(Depth_pathogen_presence~(1|Latrine_ID) + (1|Pathogen_Target) + (1|Latrine_ID:Pathogen_Target) + Depth + HH_population + shared_latrine + pit_type + water_source + toilet_paper, data = malawi, family=binomial(link='logit'), control=glmerControl(optimizer="bobyqa"))
library(lme4)
fit7 <- glmer(Depth_pathogen_presence~(1|Latrine_ID) + (1|Pathogen_Target) + (1|Latrine_ID:Pathogen_Target) + Depth + HH_population + shared_latrine + pit_type + water_source + toilet_paper, data = malawi, family=binomial(link='logit'))
fit8 <- glmer(Depth_pathogen_presence~(1|Latrine_ID) + (1|Pathogen_Target) + (1|Latrine_ID:Pathogen_Target) + Depth + HH_population + shared_latrine + pit_type + water_source + toilet_paper, data = malawi, family=binomial(link='logit'), control=glmerControl(optimizer="bobyqa"))
summary(fit8)
exp(-2.82809  + 7 * 0.17997)/(1+exp(-2.82809  + 7 * 0.17997))
#var(beta0+ 7*beta3) = var(beta0)+ 49var(beta3)+2*1*7Cov(beta0, beta3) =
var_beta0_3 <-  1.09808^2 + 49* 0.04304^2 + 14*-0.346*1.09808*0.04304
var_beta0_3
exp(-2.82809 + 7 * 0.17997)/(1+exp(-2.82809 + 7 * 0.17997))
#var(beta0+ 7*beta3) = var(beta0)+ 49var(beta3)+2*1*7Cov(beta0, beta3) = var(beta0)+ 49var(beta3) + 14corr(beta0,beta3)*sqrt(var(beta0))*sqrt(var(beta3))
var_beta0_3 <-  1.09808^2 + 49* 0.04304^2 + 14*-0.346*1.09808*0.04304
lower <- exp(-2.82809 + 7 * 0.17997-1.96* var_beta0_3) /(1+exp(-2.82809 + 7 * 0.17997-1.96* var_beta0_3))
lower <- exp(-2.82809 + 7 * 0.17997+1.96* var_beta0_3) /(1+exp(-2.82809 + 7 * 0.17997+1.96* var_beta0_3))
exp(-2.82809 + 7 * 0.17997)/(1+exp(-2.82809 + 7 * 0.17997))
#var(beta0+ 7*beta3) = var(beta0)+ 49var(beta3)+2*1*7Cov(beta0, beta3) = var(beta0)+ 49var(beta3) + 14corr(beta0,beta3)*sqrt(var(beta0))*sqrt(var(beta3))
var_beta0_3 <-  1.09808^2 + 49* 0.04304^2 + 14*-0.346*1.09808*0.04304
lower <- exp(-2.82809 + 7 * 0.17997-1.96* var_beta0_3) /(1+exp(-2.82809 + 7 * 0.17997-1.96* var_beta0_3))
upper <- exp(-2.82809 + 7 * 0.17997+1.96* var_beta0_3) /(1+exp(-2.82809 + 7 * 0.17997+1.96* var_beta0_3))
lower
upper
library(DyAlloc)
devtools::test()
expect_equal()
devtools::use_vignette()
usethis::use_vignette()
usethis::use_vignette("DyAlloc-vignette")
fit6 <- lm(Cases~ offset(logPop100k) + pov_C + nodip_C + uninsured_C + vacant_housing_C, data = dat)
plot(fit6)
summary(fit6)
fit6 <- lm(Rate.per.100000~ offset(logPop100k) + pov_C + nodip_C + uninsured_C + vacant_housing_C, data = dat)
plot(fit6)
summary(fit6)
summary(fit4)
fit6 <- lm(log(Rate.per.100000 )~  pov_C + nodip_C + uninsured_C + vacant_housing_C, data = dat)
plot(fit6)
summary(fit6)
dat$logPop100k <- log(dat$Pop100k)
fit1 <- glm(Cases ~ 1 + offset(logPop100k), data=dat, family="poisson")
summary(fit1)
rate_lm <- lm(log(Rate.per.100000)~1, data=dat)
summary(rate_lm)
library(DyAlloc)
knitr::opts_chunk$set(
collapse = TRUE,
comment = "#>"
)
library(DyAlloc)
file.exists("~/.ssh/id_rsa.pub")
